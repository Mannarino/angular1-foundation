<!doctype html>
<html class="no-js" lang="en" ng-app="consigna">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mannarino</title>
    <link rel="stylesheet" href="css/foundation.css" />
    <link rel="stylesheet" type="text/css" href="css/estilos.css">
    <script src="js/vendor/modernizr.js"></script>
    <link href="img/favicon.ico" rel="shortcut icon" type="image/x-icon" />
  </head>

  <body>

   <div ng-controller="usuarios">

      <div class="row">
        <div class="large-12 columns">
          <h1>Consigna Angular 1 - Foundation</h1>
        </div>
      </div>
     
        <div class="row">
          <div class="large-12 columns">
            <div class="panel">
              <h3>ABM de Usuarios</h3>
              <p>Puedes agregar, borrar o modificar usuarios, los datos seran almacenados en el localStorage.</p>
              <div class="row">
                <form ng-submit="save()" name="registerForm">
                    <div class="large-4 medium-4 columns">
                          <label>Nombre
                            <input type="text" maxlength="15" ng-model="recojo.nombre" require name="nombre">
                          </label>
                    </div>
                    <div class="large-4 medium-4 columns">
                          <label>Apellido
                            <input type="text" maxlength="30" ng-model="recojo.apellido" required name="apellido">
                          </label>
                    </div>
                    <div class="large-4 medium-4 columns">
                          <label>Curso a estudiar
                            <input type="text" maxlength="30" ng-model="recojo.curso" required name="curso">
                          </label>
                    </div>
                    <div class="large-4 medium-4 columns">
                          <button type="submit" ng-disabled='!registerForm.$valid' class="button success">Guardar </button>
                          <button ng-click="getClearInputs()" class="button info">Limpiar </button>
                    </div>
                  </form>
               </div>
               <blockquote><cite>El boton de guardar se habilitara cuando completes todos los campos</cite></blockquote>
            </div>
            
            <!-- modal de notificacion de eliminacion de foundation -->
             <div id="myModal" class="reveal-modal" data-reveal aria-labelledby="modalTitle" aria-hidden="true" role="dialog">
                <h2 id="modalTitle">El usuario</h2>
                <b>Nombre:</b>{{nombreEliminado}} <br>
                <b>Apellido:</b>{{nombreEliminado}} <br>
                <b>Curso:</b>{{nombreEliminado}} <br>
                <p class="lead">fue removido exitosamente</p>
                <a class="close-reveal-modal" aria-label="Close">&#215;</a>
              </div>

             <!-- modal y controlador de modificacion de usuarios -->
               <div id="firstModal" class="reveal-modal" data-reveal aria-labelledby="firstModalTitle" aria-hidden="true" role="dialog">
                   <h3 id="firstModalTitle">Modifica los datos de este usuario</h3>
                   <form ng-submit="saveChange(modificarNombre,modificarApellido,modificarCurso,variableConIndex)" name="changeForm">
                     <label>Nombre
                      <input type="text" ng-model="modificarNombre" maxlength="15" required name="modificarNombre"> <br>
                     </label>
                     <label>Apellido
                       <input type="text" ng-model="modificarApellido" maxlength="30" require name="modificarApellido"> <br>
                     </label>
                     <label>Curso
                       <input type="text" ng-model="modificarCurso" maxlength="30" require name="modificarCurso"> <br>
                     </label>
                     <p><button  type="submit" ng-disabled='!changeForm.$valid'  class="button success">Guardar cambios</button></p>
                   </form>
                   <a class="close-reveal-modal" aria-label="Close">&#215;</a>
               </div>
               <div id="secondModal" class="reveal-modal" data-reveal aria-labelledby="secondModalTitle" aria-hidden="true" role="dialog">
                  <h2 id="secondModalTitle">Informacion sobre tu modificacion</h2>
                  <p>Felicitaciones tus modificacion fueron ingresadas, muchas gracias</p>
                  <a class="close-reveal-modal" aria-label="Close">&#215;</a>
                </div>
            <div class="large-6 columns">
              <h4>Ultimo usuario ingresado</h4>
                <div ng-repeat="dato in recienteUsuario.slice().reverse()| limitTo:1">
                  <div class="usuario-reciente">
                    <h4 class="text-center">Recientemente ingresado </h4>
                    <div class="large-10 medium-10 columns datos-usuarios">
                      <b>Nombre</b>:  {{dato.nombre}}
                      <br>
                      <b>Apellido</b>: {{dato.apellido}}
                      <br>
                      <b>Curso</b>:{{dato.curso}}
                    </div>
                  </div> 
                </div>
             </div>

            <div class="large-6 columns">
              <h4>Lista completa de usuarios</h4>
                <div ng-repeat="dato in listaCompleta">
                  <div class="panel callout radius contenedor-datos-usuarios">
                    <h4 class="text-center">Usuario numero:</h4> <span class="usuario-numero">{{$index + 1}}</span>
                    <div class="large-12 medium-12 columns datos-usuarios">
                      <b>Nombre</b>:  {{dato.nombre}}
                      <br>
                      <b>Apellido</b>: {{dato.apellido}}
                      <br>
                      <b>Curso</b>:{{dato.curso}}
                    </div>
                      <a href="#" data-reveal-id="firstModal" ng-click="openModalChange(dato.nombre,dato.apellido,dato.curso,$index)"  class="radius button tiny boton-modificar">Modificar</a>
                      <button ng-click="delete($index)" class="button tiny radius alert boton-eliminar">Eliminar </button>
                  </div> 
                </div>
            </div>

    </div>
   
   

    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular.min.js"></script>
    <script src="js/vendor/angular.js"></script>
    <script src="js/factory/servicio.js"></script>
    <script src="js/vendor/jquery.js"></script>
    <script src="js/foundation.min.js"></script>
    <script>
      $(document).foundation();
    </script>
  </body>
</html>
